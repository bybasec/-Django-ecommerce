{{#each products as product @sku}}
<article on:click="fire('show-product', {product})">
  <header>
    {{#if product.images.length }}
    <img src="{{ imageUrl('product-list', product.images[0]) }}" alt="">
    {{/if}}
    <h4 >{{product.name}}</h4>
    <div>{{product.brand}}</div>
  </header>
  <div>
    ${{product.price}}
    <svg on:clickme="fire('cart-add', {product})" class="icon-cart"><use xlink:href="#icon-cart"></use></svg>
  </div>
</article>
{{/each}}

<script>
	import request from "./request.js";
    import { imageUrl } from "./utils.js";

    export default {
        events: {
            clickme(node, callback) {
                let handler = ev => {
                    ev.stopPropagation();
                    callback(ev)
                };
                node.addEventListener('click', handler);
                return {
                    destroy() {
                        node.removeEventListener('click', handler);
                    }
                }
            }
        },
        helpers: {
            imageUrl
        },
        data() {
            return {
                brands: [],
                tags: []
            }
        }
    }
</script>