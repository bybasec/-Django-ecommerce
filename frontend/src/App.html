<nav>
	<button type="button" on:click="toggleCart()">Show Cart ({{ $cart.items.length }})</button>
</nav>
<main>
	<ProductList
		bind:products="$products"
		on:show-product="showProduct(event.product)"
		on:cart-add="addToCart(event.product)"
	/>
</main>
<aside>
	<FilterList title="Brands" key="brands" bind:items="$brands" />
	<FilterList title="Tags" key="tags" bind:items="$tags" />
</aside>

<Modal bind:show="showCart">
	<Cart bind:cart="$cart" />
</Modal>

<Modal bind:show="showProduct">
	{{#if showProduct}}
	<ProductDetail bind:product="currentProduct" />
	{{/if}}
</Modal>

<script>
	import Modal from "./Modal.html";
	import Cart from "./Cart.html";
	import ProductList from "./ProductList.html";
	import ProductDetail from "./ProductDetail.html";
	import FilterList from "./FilterList.html";

	export default {
		data () {
			return {
				showCart: false,
				currentProduct: undefined,
			}
		},
		computed: {
			showProduct: (currentProduct) => currentProduct !== undefined
		},
		methods: {
			toggleCart () {
				this.set({
					showCart: !this.get('showCart')
				});
			},
			showProduct(product) {
				this.set({currentProduct: product})
			},
			addToCart(product) {

			}
		},
		components: {
			ProductDetail,
			ProductList,
			Modal,
			Cart,
			FilterList
		}
	}
</script>

<style>
	nav { grid-area: header; }
	main { grid-area: main; }
	aside { grid-area: sidebar; }
</style>